webpackJsonp([0],{pBSs:function(t,n,e){"use strict";function l(t){return Error('Unable to find icon with the name "'+t+'"')}function i(t){return Error("The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was \""+t+'".')}function o(t,n,e,l){return t||new Q(n,e,l)}function r(t){return t.cloneNode(!0)}function s(t,n){return t+":"+n}function u(t){return v._20(2,[v._10(null,0)],null,null)}function c(t){return v._20(2,[(t()(),v._1(0,0,null,null,21,"article",[["class","item-view-container"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n  "])),(t()(),v._1(2,0,null,null,3,"header",[["class","item-header"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n    "])),v._10(null,0),(t()(),v._18(-1,null,["\n  "])),(t()(),v._18(-1,null,["\n  "])),(t()(),v._1(7,0,null,null,6,"div",[["class","image-outer"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n    "])),(t()(),v._1(9,0,null,null,3,"div",[["class","image-container"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n      "])),v._10(null,1),(t()(),v._18(-1,null,["\n    "])),(t()(),v._18(-1,null,["\n  "])),(t()(),v._18(-1,null,["\n  "])),(t()(),v._1(15,0,null,null,5,"div",[["class","bottom-content"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n    "])),v._10(null,2),(t()(),v._18(-1,null,["\n    "])),v._10(null,3),(t()(),v._18(-1,null,["\n  "])),(t()(),v._18(-1,null,["\n"])),(t()(),v._18(-1,null,["\n"]))],null,null)}function a(t){return v._20(0,[(t()(),v._1(0,0,null,null,1,"img",[["appItemViewImage",""]],[[8,"src",4],[8,"alt",0],[8,"className",0]],null,null,null,null)),v._0(1,16384,null,0,w,[],null,null)],null,function(t,n){t(n,0,0,n.parent.context.$implicit.previewImage.url,n.parent.context.$implicit.title,v._11(n,1).classes)})}function h(t){return v._20(0,[(t()(),v._1(0,0,null,null,2,"video",[["appItemViewImage",""],["autoplay",""],["controls",""],["muted",""],["playsinline",""]],[[8,"src",4],[8,"className",0]],null,null,null,null)),v._0(1,16384,null,0,w,[],null,null),(t()(),v._18(-1,null,["\n      "]))],null,function(t,n){t(n,0,0,n.parent.context.$implicit.media.url,v._11(n,1).classes)})}function p(t){return v._20(0,[(t()(),v._1(0,0,null,null,4,"p",[],null,null,null,null,null)),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(2,0,null,null,1,"strong",[],null,null,null,null,null)),(t()(),v._18(3,null,["",""])),(t()(),v._18(4,null,[" ","\n      "]))],null,function(t,n){t(n,3,0,n.context.$implicit.author),t(n,4,0,n.context.$implicit.body)})}function m(t){return v._20(0,[(t()(),v._1(0,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.share(t.parent.context.$implicit)&&l),l},u,et)),v._0(1,638976,null,0,tt,[v.k,Q,[8,null]],null,null),(t()(),v._18(-1,0,["share"]))],function(t,n){t(n,1,0)},null)}function f(t){return v._20(0,[(t()(),v._1(0,0,null,null,62,"div",[["appInView",""]],null,[[null,"itemInView"]],function(t,n,e){var l=!0;return"itemInView"===n&&(l=!1!==t.component.onItemInView(t.context.$implicit)&&l),l},null,null)),v._0(1,81920,null,0,lt,[v.k],null,{itemInView:"itemInView"}),(t()(),v._18(-1,null,["\n    "])),(t()(),v._1(3,0,null,null,58,"app-item-view",[],null,null,null,c,it)),v._0(4,114688,null,0,E,[],null,null),(t()(),v._18(-1,3,["\n      "])),(t()(),v._1(6,0,null,0,9,"div",[["appItemViewAuthor",""]],[[8,"className",0]],null,null,null,null)),v._0(7,16384,null,0,y,[],null,null),(t()(),v._18(-1,null,["\n        "])),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(10,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),v._18(11,null,["",""])),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(13,0,null,null,1,"div",[],null,null,null,null,null)),(t()(),v._18(14,null,["",""])),(t()(),v._18(-1,null,["\n      "])),(t()(),v._18(-1,3,["\n      "])),(t()(),v.W(16777216,null,1,1,null,a)),v._0(18,16384,null,0,x.k,[v.L,v.I],{ngIf:[0,"ngIf"]},null),(t()(),v._18(-1,3,["\n      "])),(t()(),v.W(16777216,null,1,1,null,h)),v._0(21,16384,null,0,x.k,[v.L,v.I],{ngIf:[0,"ngIf"]},null),(t()(),v._18(-1,3,["\n      "])),(t()(),v._1(23,0,null,3,3,"div",[["appItemViewVotes",""]],[[8,"className",0]],null,null,null,null)),v._0(24,16384,null,0,S,[],null,null),(t()(),v._18(25,null,[""," upvotes"])),v._14(26,1),(t()(),v._18(-1,3,["\n      "])),(t()(),v._1(28,0,null,3,2,"p",[["appItemViewTitle",""]],[[8,"className",0]],null,null,null,null)),v._0(29,16384,null,0,I,[],null,null),(t()(),v._18(30,null,["",""])),(t()(),v._18(-1,3,["\n      "])),(t()(),v.W(16777216,null,3,1,null,p)),v._0(33,802816,null,0,x.j,[v.L,v.I,v.q],{ngForOf:[0,"ngForOf"]},null),(t()(),v._18(-1,3,["\n      "])),(t()(),v._1(35,0,null,3,2,"div",[["appItemViewComments",""]],[[8,"className",0]],null,null,null,null)),v._0(36,16384,null,0,C,[],null,null),(t()(),v._18(37,null,["View all "," comments"])),(t()(),v._18(-1,3,["\n      "])),(t()(),v._1(39,0,null,2,21,"div",[["appItemViewActions",""]],[[8,"className",0]],null,null,null,null)),v._0(40,16384,null,0,O,[],null,null),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(42,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,u,et)),v._0(43,638976,null,0,tt,[v.k,Q,[8,null]],null,null),(t()(),v._18(-1,0,["thumb_up"])),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(46,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,u,et)),v._0(47,638976,null,0,tt,[v.k,Q,[8,null]],null,null),(t()(),v._18(-1,0,["thumb_down"])),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(50,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,null,null,u,et)),v._0(51,638976,null,0,tt,[v.k,Q,[8,null]],null,null),(t()(),v._18(-1,0,["comment"])),(t()(),v._18(-1,null,["\n        "])),(t()(),v._1(54,0,null,null,2,"mat-icon",[["class","mat-icon"],["role","img"]],null,[[null,"click"]],function(t,n,e){var l=!0;return"click"===n&&(l=!1!==t.component.openLink(t.context.$implicit.url)&&l),l},u,et)),v._0(55,638976,null,0,tt,[v.k,Q,[8,null]],null,null),(t()(),v._18(-1,0,["open_in_new"])),(t()(),v._18(-1,null,["\n        "])),(t()(),v.W(16777216,null,null,1,null,m)),v._0(59,16384,null,0,x.k,[v.L,v.I],{ngIf:[0,"ngIf"]},null),(t()(),v._18(-1,null,["\n      "])),(t()(),v._18(-1,3,["\n    "])),(t()(),v._18(-1,null,["\n  "]))],function(t,n){var e=n.component;t(n,1,0),t(n,4,0),t(n,18,0,n.context.$implicit.previewImage&&(!n.context.$implicit.media||!n.context.$implicit.media.enablePreview)),t(n,21,0,n.context.$implicit.media&&n.context.$implicit.media.enablePreview&&n.context.$implicit.media.isGif),t(n,33,0,n.context.$implicit.comments),t(n,43,0),t(n,47,0),t(n,51,0),t(n,55,0),t(n,59,0,e.sharer.canShare())},function(t,n){t(n,6,0,v._11(n,7).classes),t(n,11,0,n.context.$implicit.subreddit),t(n,14,0,n.context.$implicit.author),t(n,23,0,v._11(n,24).classes),t(n,25,0,v._19(n,25,0,t(n,26,0,v._11(n.parent,0),n.context.$implicit.score))),t(n,28,0,v._11(n,29).classes),t(n,30,0,n.context.$implicit.title),t(n,35,0,v._11(n,36).classes),t(n,37,0,n.context.$implicit.numOfcomments),t(n,39,0,v._11(n,40).classes)})}function d(t){return v._20(0,[v._13(0,x.e,[v.s]),v._16(402653184,1,{viewport:0}),(t()(),v._1(2,0,[[1,0],["viewport",1]],null,0,"div",[["class","viewport"]],null,null,null,null,null)),(t()(),v._18(-1,null,["\n"])),(t()(),v._1(4,0,null,null,6,"div",[["appScrollParasite",""],["class","listings"]],null,[[null,"reachedBottom"],[null,"scroll"]],function(t,n,e){var l=!0,i=t.component;return"scroll"===n&&(l=!1!==v._11(t,5).onScroll()&&l),"reachedBottom"===n&&(l=!1!==i.loadMore()&&l),l},null,null)),v._0(5,212992,null,0,ut,[v.k],null,{reachedBottom:"reachedBottom"}),(t()(),v._18(-1,null,["\n  "])),(t()(),v.W(16777216,null,null,2,null,f)),v._0(8,802816,null,0,x.j,[v.L,v.I,v.q],{ngForOf:[0,"ngForOf"]},null),v._13(131072,x.b,[v.h]),(t()(),v._18(-1,null,["\n"])),(t()(),v._18(-1,null,["\n"]))],function(t,n){var e=n.component;t(n,5,0),t(n,8,0,v._19(n,8,0,v._11(n,9).transform(e.listing$)))},null)}function _(t,n){switch(void 0===t&&(t=Ot),n.type){case g.LIST_COMPLETE:var e=void 0;return n.payload.length&&(e=n.payload[n.payload.length-1].name),Ct({},t,{listings:t.listings.concat(n.payload),continuationToken:e});case g.LOAD_FIRST_COMMENTS_COMPLETE:var l=t.listings.findIndex(function(t){return t.id===n.payload.listingId}),i=t.listings[l];return i.comments=n.payload.comments,Ct({},t,{listings:t.listings.slice(0,l).concat([Ct({},i)],t.listings.slice(l+1))});default:return t}}Object.defineProperty(n,"__esModule",{value:!0});var g,v=e("LMZF"),b=function(){},y=function(){this.classes="author"},w=function(){this.classes="image"},I=function(){this.classes="title"},S=function(){this.classes="votes"},C=function(){this.classes="comments"},O=function(){this.classes="actions"},E=function(){function t(){}return t.prototype.ngOnInit=function(){},t}(),x=e("Un6q"),F=new v.o("cdk-dir-doc"),j=function(){return function(t){this.value="ltr",this.change=new v.m,t&&(this.value=(t.body?t.body.dir:null)||(t.documentElement?t.documentElement.dir:null)||"ltr")}}(),k=function(){},L=e("6Xbx"),M=(e("TO51"),e("AP4T")),T=e("RyBE"),A=("undefined"!=typeof Intl&&Intl,new v.o("mat-sanity-checks")),N=function(){function t(t){this._sanityChecksEnabled=t,this._hasDoneGlobalChecks=!1,this._hasCheckedHammer=!1,this._document="object"==typeof document&&document?document:null,this._window="object"==typeof window&&window?window:null,this._areChecksEnabled()&&!this._hasDoneGlobalChecks&&(this._checkDoctypeIsDefined(),this._checkThemeIsPresent(),this._hasDoneGlobalChecks=!0)}return t.prototype._areChecksEnabled=function(){return this._sanityChecksEnabled&&Object(v.R)()&&!this._isTestEnv()},t.prototype._isTestEnv=function(){return this._window&&(this._window.__karma__||this._window.jasmine)},t.prototype._checkDoctypeIsDefined=function(){this._document&&!this._document.doctype&&console.warn("Current document does not have a doctype. This may cause some Angular Material components not to behave as expected.")},t.prototype._checkThemeIsPresent=function(){if(this._document&&"function"==typeof getComputedStyle){var t=this._document.createElement("div");t.classList.add("mat-theme-loaded-marker"),this._document.body.appendChild(t);var n=getComputedStyle(t);n&&"none"!==n.display&&console.warn("Could not find Angular Material core theme. Most Material components may not work as expected. For more info refer to the theming guide: https://material.angular.io/guide/theming"),this._document.body.removeChild(t)}},t.prototype._checkHammerIsAvailable=function(){!this._hasCheckedHammer&&this._window&&(this._areChecksEnabled()&&!this._window.Hammer&&console.warn("Could not find HammerJS. Certain Angular Material components may not work correctly."),this._hasCheckedHammer=!0)},t}(),R=e("pXwq"),V=e("wORZ"),U=e("nihM"),$=e("TE/T"),P=e("qqDE"),D=e("eIqN"),B=e("9iV4"),q=e("Ecq+"),H=e("1j/l"),z=e("qgI0"),W=e("lI6h"),Z=function(t){function n(n,e){t.call(this),this.sources=n,this.resultSelector=e}return Object(L.c)(n,t),n.create=function(){for(var t=[],e=0;e<arguments.length;e++)t[e-0]=arguments[e];if(null===t||0===arguments.length)return new q.a;var l=null;return"function"==typeof t[t.length-1]&&(l=t.pop()),1===t.length&&Object(H.a)(t[0])&&(t=t[0]),0===t.length?new q.a:new n(t,l)},n.prototype._subscribe=function(t){return new G(t,this.sources,this.resultSelector)},n}(M.a),G=function(t){function n(n,e,l){t.call(this,n),this.sources=e,this.resultSelector=l,this.completed=0,this.haveValues=0;var i=e.length;this.total=i,this.values=new Array(i);for(var o=0;o<i;o++){var r=e[o],s=Object(z.a)(this,r,null,o);s&&(s.outerIndex=o,this.add(s))}}return Object(L.c)(n,t),n.prototype.notifyNext=function(t,n,e,l,i){this.values[e]=n,i._hasValue||(i._hasValue=!0,this.haveValues++)},n.prototype.notifyComplete=function(t){var n=this.destination,e=this.haveValues,l=this.resultSelector,i=this.values,o=i.length;if(t._hasValue){if(this.completed++,this.completed===o){if(e===o){var r=l?l.apply(this,i):i;n.next(r)}n.complete()}}else n.complete()},n}(W.a),Y=Z.create,J=e("GZB0"),X=e("ZWUB"),K=function(t){this.url=t,this.svgElement=null},Q=function(){function t(t,n,e){this._httpClient=t,this._sanitizer=n,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._defaultFontSetClass="material-icons",this._document=e}return t.prototype.addSvgIcon=function(t,n){return this.addSvgIconInNamespace("",t,n)},t.prototype.addSvgIconInNamespace=function(t,n,e){var l=s(t,n);return this._svgIconConfigs.set(l,new K(e)),this},t.prototype.addSvgIconSet=function(t){return this.addSvgIconSetInNamespace("",t)},t.prototype.addSvgIconSetInNamespace=function(t,n){var e=new K(n),l=this._iconSetConfigs.get(t);return l?l.push(e):this._iconSetConfigs.set(t,[e]),this},t.prototype.registerFontClassAlias=function(t,n){return void 0===n&&(n=t),this._fontCssClassesByAlias.set(t,n),this},t.prototype.classNameForFontAlias=function(t){return this._fontCssClassesByAlias.get(t)||t},t.prototype.setDefaultFontSetClass=function(t){return this._defaultFontSetClass=t,this},t.prototype.getDefaultFontSetClass=function(){return this._defaultFontSetClass},t.prototype.getSvgIconFromUrl=function(t){var n=this,e=this._sanitizer.sanitize(v.E.RESOURCE_URL,t);if(!e)throw i(t);var l=this._cachedIconsByUrl.get(e);return l?Object(J.a)(r(l)):this._loadSvgIconFromConfig(new K(t)).pipe(Object(U.a)(function(t){return n._cachedIconsByUrl.set(e,t)}),Object(P.a)(function(t){return r(t)}))},t.prototype.getNamedSvgIcon=function(t,n){void 0===n&&(n="");var e=s(n,t),i=this._svgIconConfigs.get(e);if(i)return this._getSvgFromConfig(i);var o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(t,o):Object(X.a)(l(e))},t.prototype._getSvgFromConfig=function(t){return t.svgElement?Object(J.a)(r(t.svgElement)):this._loadSvgIconFromConfig(t).pipe(Object(U.a)(function(n){return t.svgElement=n}),Object(P.a)(function(t){return r(t)}))},t.prototype._getSvgFromIconSetConfigs=function(t,n){var e=this,i=this._extractIconWithNameFromAnySet(t,n);if(i)return Object(J.a)(i);var o=n.filter(function(t){return!t.svgElement}).map(function(t){return e._loadSvgIconSetFromConfig(t).pipe(Object(V.a)(function(n){var l=e._sanitizer.sanitize(v.E.RESOURCE_URL,t.url);return console.log("Loading icon set URL: "+l+" failed: "+n),Object(J.a)(null)}))});return Y(o).pipe(Object(P.a)(function(){var i=e._extractIconWithNameFromAnySet(t,n);if(!i)throw l(t);return i}))},t.prototype._extractIconWithNameFromAnySet=function(t,n){for(var e=n.length-1;e>=0;e--){var l=n[e];if(l.svgElement){var i=this._extractSvgIconFromSet(l.svgElement,t);if(i)return i}}return null},t.prototype._loadSvgIconFromConfig=function(t){var n=this;return this._fetchUrl(t.url).pipe(Object(P.a)(function(t){return n._createSvgElementForSingleIcon(t)}))},t.prototype._loadSvgIconSetFromConfig=function(t){var n=this;return t.svgElement?Object(J.a)(t.svgElement):this._fetchUrl(t.url).pipe(Object(P.a)(function(e){return t.svgElement||(t.svgElement=n._svgElementFromString(e)),t.svgElement}))},t.prototype._createSvgElementForSingleIcon=function(t){var n=this._svgElementFromString(t);return this._setSvgAttributes(n),n},t.prototype._extractSvgIconFromSet=function(t,n){var e=t.querySelector("#"+n);if(!e)return null;var l=e.cloneNode(!0);if(l.id="","svg"===l.nodeName.toLowerCase())return this._setSvgAttributes(l);if("symbol"===l.nodeName.toLowerCase())return this._setSvgAttributes(this._toSvgElement(l));var i=this._svgElementFromString("<svg></svg>");return i.appendChild(l),this._setSvgAttributes(i)},t.prototype._svgElementFromString=function(t){if(this._document||"undefined"!=typeof document){var n=(this._document||document).createElement("DIV");n.innerHTML=t;var e=n.querySelector("svg");if(!e)throw Error("<svg> tag not found");return e}throw new Error("MatIconRegistry could not resolve document.")},t.prototype._toSvgElement=function(t){for(var n=this._svgElementFromString("<svg></svg>"),e=0;e<t.childNodes.length;e++)t.childNodes[e].nodeType===this._document.ELEMENT_NODE&&n.appendChild(t.childNodes[e].cloneNode(!0));return n},t.prototype._setSvgAttributes=function(t){return t.getAttribute("xmlns")||t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t.setAttribute("fit",""),t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.setAttribute("preserveAspectRatio","xMidYMid meet"),t.setAttribute("focusable","false"),t},t.prototype._fetchUrl=function(t){var n=this;if(!this._httpClient)throw Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.");var e=this._sanitizer.sanitize(v.E.RESOURCE_URL,t);if(!e)throw i(t);var l=this._inProgressUrlFetches.get(e);if(l)return l;var o=this._httpClient.get(e,{responseType:"text"}).pipe(Object($.a)(function(){return n._inProgressUrlFetches.delete(e)}),Object(D.a)());return this._inProgressUrlFetches.set(e,o),o},t}(),tt=function(t){function n(n,e,l){var i=t.call(this,n)||this;return i._iconRegistry=e,l||n.nativeElement.setAttribute("aria-hidden","true"),i}return Object(L.c)(n,t),Object.defineProperty(n.prototype,"fontSet",{get:function(){return this._fontSet},set:function(t){this._fontSet=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),Object.defineProperty(n.prototype,"fontIcon",{get:function(){return this._fontIcon},set:function(t){this._fontIcon=this._cleanupFontValue(t)},enumerable:!0,configurable:!0}),n.prototype._splitIconName=function(t){if(!t)return["",""];var n=t.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error('Invalid icon name: "'+t+'"')}},n.prototype.ngOnChanges=function(t){var n=this;if(t.svgIcon)if(this.svgIcon){var e=this._splitIconName(this.svgIcon);this._iconRegistry.getNamedSvgIcon(e[1],e[0]).pipe(Object(R.a)(1)).subscribe(function(t){return n._setSvgElement(t)},function(t){return console.log("Error retrieving icon: "+t.message)})}else this._clearSvgElement();this._usingFontIcon()&&this._updateFontIconClasses()},n.prototype.ngOnInit=function(){this._usingFontIcon()&&this._updateFontIconClasses()},n.prototype._usingFontIcon=function(){return!this.svgIcon},n.prototype._setSvgElement=function(t){this._clearSvgElement(),this._elementRef.nativeElement.appendChild(t)},n.prototype._clearSvgElement=function(){for(var t=this._elementRef.nativeElement,n=t.childNodes.length,e=0;e<n;e++)t.removeChild(t.childNodes[e])},n.prototype._updateFontIconClasses=function(){if(this._usingFontIcon()){var t=this._elementRef.nativeElement,n=this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet):this._iconRegistry.getDefaultFontSetClass();n!=this._previousFontSetClass&&(this._previousFontSetClass&&t.classList.remove(this._previousFontSetClass),n&&t.classList.add(n),this._previousFontSetClass=n),this.fontIcon!=this._previousFontIconClass&&(this._previousFontIconClass&&t.classList.remove(this._previousFontIconClass),this.fontIcon&&t.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}},n.prototype._cleanupFontValue=function(t){return"string"==typeof t?t.trim().split(" ")[0]:t},n}(function(t,n){return function(t){function e(){for(var e=[],l=0;l<arguments.length;l++)e[l]=arguments[l];var i=t.apply(this,e)||this;return i.color=n,i}return Object(L.c)(e,t),Object.defineProperty(e.prototype,"color",{get:function(){return this._color},set:function(t){var e=t||n;e!==this._color&&(this._color&&this._elementRef.nativeElement.classList.remove("mat-"+this._color),e&&this._elementRef.nativeElement.classList.add("mat-"+e),this._color=e)},enumerable:!0,configurable:!0}),e}(function(t){this._elementRef=t})}()),nt=function(){},et=v.Z({encapsulation:2,styles:[".mat-icon{background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px}"],data:{}}),lt=function(){function t(t){this.el=t,this.itemInView=new v.m}return t.prototype.ngOnInit=function(){var t=this;new IntersectionObserver(function(n){n[0].isIntersecting&&t.itemInView.next()},{rootMargin:"0px",threshold:.2}).observe(this.el.nativeElement)},t}(),it=v.Z({encapsulation:2,styles:[[".item-view-container{max-width:600px;width:100%;border:1px solid #fff;border-radius:3px;background:#fff;word-break:break-word}.item-header{margin:16px}.author div{font-size:14px;font-weight:700}.author div:not(:first-child){font-weight:400}.image-container{max-width:600px;max-height:600px;overflow:hidden;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100vw}.image{width:100%;height:100%}.actions>*{color:rgba(0,0,0,.3)}.actions>:hover{color:rgba(0,0,0,.8);cursor:pointer}.actions>:not(:last-child){margin-right:8px}.bottom-content{margin:16px;line-height:1.4em}.votes{font-weight:600;margin:8px 0}.comments{margin:14px 0;color:rgba(0,0,0,.55)}"]],data:{}}),ot=e("/iaB"),rt=e("riZV"),st=e("GlJY"),ut=function(){function t(t){this.el=t,this.reachedBottom=new v.m,this.scrollBuffer=300,this.scrollEvent=new v.m}return t.prototype.onScroll=function(t){this.scrollEvent.next()},t.prototype.ngOnInit=function(){var t=this;this.scrollSub=this.scrollEvent.pipe(Object(P.a)(function(){return t.el.nativeElement.scrollTop}),Object(ot.a)(),Object(rt.a)(function(t){return t[0]<t[1]}),Object(P.a)(function(t){return t[1]}),Object(rt.a)(function(n){return n>t.el.nativeElement.scrollHeight-2*t.el.nativeElement.clientHeight}),Object(P.a)(function(){return t.el.nativeElement.scrollHeight}),Object(st.a)()).subscribe(function(n){return t.reachedBottom.next()})},t.prototype.ngOnDestroy=function(){this.scrollSub&&this.scrollSub.unsubscribe()},t}();!function(t){t.LIST="[Listing] List",t.LIST_COMPLETE="[Listing] List Complete",t.LOAD_FIRST_COMMENTS="[Listing] Load First Comments",t.LOAD_FIRST_COMMENTS_COMPLETE="[Listing] Load First Comments Complete"}(g||(g={}));var ct=function(){return function(t){this.payload=t,this.type=g.LIST}}(),at=function(){return function(t){this.payload=t,this.type=g.LOAD_FIRST_COMMENTS}}(),ht=function(){return function(t){this.payload=t,this.type=g.LOAD_FIRST_COMMENTS_COMPLETE}}(),pt=function(){return function(t){this.payload=t,this.type=g.LIST_COMPLETE}}(),mt=(e("2soc"),e("ADVA")),ft=(e("p5Ee"),Object(mt.B)("listingState")),dt=Object(mt.D)(ft,function(t){return t.listings}),_t=Object(mt.D)(ft,function(t){return t.continuationToken}),gt=function(){function t(t,n){var e=this;this.store=t,this.sharer=n,this.listing$=this.store.select(dt),this.store.select(_t).subscribe(function(t){return e.token=t})}return t.prototype.ngOnInit=function(){this.store.dispatch(new ct)},t.prototype.loadMore=function(){console.log(this.token),this.store.dispatch(new ct(this.token))},t.prototype.share=function(t){this.sharer.canShare()?this.sharer.share(t.title,void 0,t.url).subscribe():console.log("browser does not support sharing API")},t.prototype.openLink=function(t){window.open(t,"new")},t.prototype.onItemInView=function(t){t.comments.length||this.store.dispatch(new at({listingId:t.id,subreddit:t.subreddit})),t.media&&(t.media.enablePreview=!0)},t}(),vt=e("CASk"),bt=function(){function t(){}return t.prototype.canShare=function(){return!!navigator.share},t.prototype.share=function(t,n,e){if(this.canShare())return Object(vt.a)(navigator.share({title:t,text:n,url:e})).pipe(Object(P.a)(function(){}));throw new Error("Navigator share API not enabled on this device")},t}(),yt=v.Z({encapsulation:0,styles:[[".listings[_ngcontent-%COMP%]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:100vh;overflow-y:auto;overflow-x:hidden}.viewport[_ngcontent-%COMP%]{position:fixed;top:0;left:0;bottom:0;right:0;z-index:-1}"]],data:{}}),wt=v.X("app-list-view",gt,function(t){return v._20(0,[(t()(),v._1(0,0,null,null,1,"app-list-view",[],null,null,null,d,yt)),v._0(1,114688,null,0,gt,[mt.n,bt],null,null)],function(t,n){t(n,1,0)},null)},{},{},[]),It=e("UHIZ"),St=function(){},Ct=this&&this.__assign||Object.assign||function(t){for(var n,e=1,l=arguments.length;e<l;e++){n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ot={listings:[],continuationToken:void 0},Et=function(){},xt=function(){function t(t,n){this.baseUrl=t,this.http=n}return t.prototype.get=function(t){var n=this;return void 0===t&&(t=""),this.http.get(this.baseUrl+".json?raw_json=1&after="+t).pipe(Object(rt.b)(function(t){return n.mapResponse(t)}))},t.prototype.getComments=function(t,n,e,l){var i=this;return void 0===l&&(l=""),this.http.get(this.baseUrl+"/"+n+"/comments/"+t+".json?raw_json=1&limit="+e+"&after="+l).pipe(Object(rt.b)(function(t){return i.mapCommentsResponse(t)}))},t.prototype.mapResponse=function(t){var n=this;return t.data.children.map(function(t){var e={id:t.data.id,name:t.data.name,title:t.data.title,url:t.data.url,author:t.data.author,subreddit:t.data.subreddit_name_prefixed,score:t.data.score,numOfcomments:t.data.num_comments,comments:[]},l=n.getImage(t.data);if(l&&(e.previewImage={url:l.url,width:l.width,height:l.height}),t.data.preview&&t.data.preview.reddit_video_preview){var i=t.data.preview.reddit_video_preview;e.media={url:i.fallback_url,isGif:i.is_gif,enablePreview:!1}}return e})},t.prototype.getImage=function(t){if(t.preview&&t.preview.images&&t.preview.images.length){var n=t.preview.images[0].resolutions;return n[Math.min(n.length-1,3)]}},t.prototype.mapCommentsResponse=function(t){return t.length?this.mapComments(t[1]):[]},t.prototype.mapComments=function(t){var n=this;return t.data&&t.data.children&&t.data.children.length?t.data.children.filter(function(t){return"more"!==t.kind}).map(function(t){return{id:t.data.id,body:t.data.body,score:t.data.score,createdOnUtc:t.data.created_utc,author:t.data.author,replies:n.mapComments(t.data.replies)}}):[]},t}(),Ft=e("c8o8"),jt=e("Tl+Y"),kt=e("5jKg"),Lt=function(){function t(t,n){var e=this;this.actions$=t,this.service=n,this.list$=this.actions$.pipe(Object(jt.d)(g.LIST),Object(kt.a)(function(t){return e.service.get(t.payload).pipe(Object(P.a)(function(t){return new pt(t)}))})),this.loadFirstComments$=this.actions$.ofType(g.LOAD_FIRST_COMMENTS).pipe(Object(jt.d)(g.LOAD_FIRST_COMMENTS),Object(kt.a)(function(t){return e.service.getComments(t.payload.listingId,t.payload.subreddit,2).pipe(Object(P.a)(function(n){return new ht({listingId:t.payload.listingId,comments:n})}))}))}return Object(L.b)([Object(jt.b)(),Object(L.d)("design:type",M.a)],t.prototype,"list$",void 0),Object(L.b)([Object(jt.b)(),Object(L.d)("design:type",M.a)],t.prototype,"loadFirstComments$",void 0),t}(),Mt=function(){},Tt=function(){},At=function(){},Nt=function(){};e.d(n,"ListingModuleNgFactory",function(){return Rt});var Rt=v.Y(b,[],function(t){return v._7([v._8(512,v.j,v.U,[[8,[wt]],[3,v.j],v.v]),v._8(4608,x.m,x.l,[v.s,[2,x.r]]),v._8(6144,F,null,[x.d]),v._8(4608,j,j,[[2,F]]),v._8(5120,Q,o,[[3,Q],[2,B.c],T.c,[2,x.d]]),v._8(4608,bt,bt,[]),v._8(512,x.c,x.c,[]),v._8(512,It.n,It.n,[[2,It.t],[2,It.m]]),v._8(512,St,St,[]),v._8(1024,mt.j,function(){return[{key:"listingState",reducerFactory:mt.z,metaReducers:[],initialState:void 0}]},[]),v._8(1024,mt.q,function(){return[_]},[]),v._8(1024,mt.r,function(t){return[t]},[mt.q]),v._8(1024,mt.b,function(t,n,e){return[mt.w(t,n,e)]},[v.p,mt.q,mt.r]),v._8(131584,mt.o,mt.o,[mt.j,mt.b,mt.g,mt.p]),v._8(512,Et,Et,[]),v._8(512,xt,xt,[Ft.a,B.c]),v._8(512,Lt,Lt,[jt.a,xt]),v._8(1024,jt.i,function(t){return[jt.e(t)]},[Lt]),v._8(512,jt.g,jt.g,[jt.f,jt.i,[2,mt.p],[2,mt.o]]),v._8(512,Mt,Mt,[]),v._8(512,k,k,[]),v._8(256,A,!0,[]),v._8(512,N,N,[[2,A]]),v._8(512,nt,nt,[]),v._8(512,Tt,Tt,[]),v._8(512,At,At,[]),v._8(512,Nt,Nt,[]),v._8(512,b,b,[]),v._8(1024,It.k,function(){return[[{path:"",component:gt}]]},[])])})}});